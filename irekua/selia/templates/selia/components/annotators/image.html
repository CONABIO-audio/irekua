{% load crispy_forms_tags %}
{% load widget_tweaks %}
{% load i18n %}
{% load selia_buttons %}

<div class="row">
<div class="col d-flex" >
  <div class="container">
  <input type="hidden" id="img_url" name="img_url" value="{{ item.item_file.url }}">
  {% if mode == 'edit' %}
      <input type="hidden" id="prev_annotation" name="prev_annotation" value="{{ annotation.annotation }}">
      <input type="hidden" id="prev_label" name="prev_label" value="{{ annotation.label }}">
  {% endif %}
  <div class="row description_object">
    <canvas id="canvas" class="center-fit" width="1000" style="background-image: url({{ item.item_file.url }}); background-size:cover; background-repeat:   no-repeat;background-position: center center;"></canvas>
  </div>
  <div class="row-1 p-2 small_toolbar" align="right">
    <div class="col">
      <button id="canvas_clean" type="button" class="button_small_toolbar">{% trans 'Clear' %}<i class="fas fa-eraser"></i></button>
    </div>
  </div>
</div>
<div class="col-4 description_object">
      {% if mode == 'create' %}
        <h4>{% trans 'New image annotation:' %}</h4>
        <form id="addAnnForm" action="?chain={{ chain }}" method="post" enctype="multipart/form-data">
      {% else %}
        <h4>{% trans 'Edit image annotation:' %}</h4>
        <form id="addAnnForm" action="?chain={{ chain }}&mode=edit&annotation={{ annotation.pk }}" method="post" enctype="multipart/form-data">
      {% endif %}
        {% csrf_token %}
        <input type="hidden" id="item_field" name="item" value="{{ item.pk }}">
        <input type="hidden" id="event_type_field" name="event_type" value="Animal en Foto">
        <input type="hidden" id="annotation_type_field" name="annotation_type" value="Bounding Box">
        <input type="hidden" id="annotation_field" name="annotation" value="{}">
        <input type="hidden" id="annotation_tool_field" name="annotation_tool" value="1">

          <div class="row d-flex justify-content-between">
          <div class="p-3 ui-widget">
            {% trans 'Label:' %}
           <input type="text" id="tax_label" name="label" style='width:265px;' placeholder="{% trans ' Species common or scientific name' %}" required>
          </div>
          </div>
          <div class="row d-flex justify-content-between">
          <div class="p-3">
            {{ form.certainty.errors }}
            {{ form.certainty.label_tag }}
            {{ form.certainty }}
            <small id="certaintyInput" class="form-text text-muted">{{ form.certainty.help_text }}</small>
          </div>
          </div>
          <div class="row d-flex justify-content-between">
          <div class="p-3">
            {{ form.quality.errors }}
            {{ form.quality.label_tag }}
            {{ form.quality }}
            <small id="qualityInput" class="form-text text-muted">{{ form.quality.help_text }}</small>
          </div>
          </div>
           <div class="row d-flex justify-content-between">
          <div class="p-3">
            {{ form.commentaries.errors }}
            {{ form.commentaries.label_tag }}
            {{ form.commentaries }}
            <small id="commentariesInput" class="form-text text-muted">{{ form.commentaries.help_text }}</small>
          </div>
          </div>
          <div class="row">
            <div class="col" align="right">
              <button type="submit" class="btn btn-primary">{% if mode == 'create' %}{% trans 'Add annotation' %}{% else %}{% trans 'Save changes' %}{% endif %}</button>
            </div>
            {% if mode == 'edit' %}
            <div class="col" align="left">
              <a href="{{ request.get_full_path }}" class="btn btn-primary">{% trans 'Restore' %}</a>
            </div>
            {% endif %}
          </div>
      </form>
</div>

</div>
</div>




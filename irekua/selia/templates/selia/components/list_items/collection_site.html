{% extends 'selia/components/list_item.html' %}
{% load static %}
{% load selia_buttons %}
{% load i18n %}

{% block list-item-content %}
<div class="row w-100">
  <div class="col">
    <div class="container h-100">
        {{ item.site.map_widget_no_controls }}
    </div>
  </div>
  <div class="col">
    <div class="media">
      <div class="media-body mt-0">
        <h4 class="mt-0">
          {% if item.internal_id %}
            {{ item.internal_id }}
          {% else %}
            {% trans 'Site' %}{{ item.pk }}
          {% endif %}
        </h4>
        {% if item.site.locality %}
          <div class="text-muted">{{ item.site.locality }}</div>
        {% endif %}
        <div class="text-muted"><a href="{% url 'selia:collection_site_detail' item.pk %}">{% enter_button %}</a></div>
      </div>
    </div>
  </div>
  <div class="col">
    <div class="row">
      <h6>{% trans 'Site type' %}</h6>
      <div class="text-muted ml-4">{{ item.site_type }}</div>
    </div>
    <div class="row">
      <h6>{% trans 'Collection Site ID' %}</h6>
      <div class="text-muted ml-4">{{ item.internal_id }}</div>
    </div>
    <div class="row">
      <h6>{% trans 'Collection' %}</h6>
      <div class="text-muted ml-4">{{ item.collection }}</div>
    </div>

  </div>

  <div class="col">
    {% if item.site.created_by == request.user %}
    {% if item.site.name %}
    <div class="row">
      <h6>{% trans 'Name' %}</h6>
      <div class="text-muted ml-4">{{ item.site.name }}</div>
    </div>
    {% endif %}
    {% endif %}
    {% if item.site.locality %}
    <div class="row">
      <h6>{% trans 'Locality' %}</h6>
      <div class="text-muted ml-4">{{ item.site.locality }}</div>
    </div>
    {% endif %}
    <div class="row">
      <h6>{% trans 'Owner' %}</h6>
      <div class="text-muted ml-4">{{ item.site.created_by }}</div>
    </div>
  </div>

  <div class="col">
    <div class="row">
      <div class="col d-flex">
          <h6>{% trans 'Items' %}</h6>
          <div class="text-muted ml-4">{{ item.items.count }}</div>
      </div>
      <div class="col-3">
          <div class="row">
            <a href="{% url 'selia:collection_items' item.collection.pk %}?sampling_event_device__sampling_event__collection_site={{ item.pk }}">{% see_button %}</a>
          </div>
      </div>
      <div class="col-2">
          <a href="{% url 'selia:create_item' %}?collection={{ collection.pk }}&collection_site={{ item.pk }}"><i class="fas fa-plus"></i></a>
      </div>
    </div>
    <div class="row">
      <div class="col d-flex">
          <h6>{% trans 'Sampling events' %}</h6>
          <div class="text-muted ml-4">{{ item.samplingevent_set.count }}</div>
      </div>
    </div>
  </div>
</div>
{% endblock list-item-content %}
